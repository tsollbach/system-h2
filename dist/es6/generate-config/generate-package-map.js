import glob from 'glob';
import { SEP, JS_EXTENSIONS } from './constants';
export function generatePackageMap(rootFolder, packagePath) {
    const packageMap = {};
    const files = glob.sync(`${rootFolder}${SEP}${packagePath}${SEP}**${SEP}*.@(${JS_EXTENSIONS})`);
    const regex = new RegExp(`^${rootFolder}${SEP}${packagePath}${SEP}(.*)\\.\\w+$`);
    files.forEach((file) => {
        if (file.match(/index\.\w+$/))
            return;
        const match = regex.exec(file);
        if (match) {
            const mapKey = `./${match[1]}`;
            packageMap[mapKey] = file.replace(`${rootFolder}${SEP}`, '');
        }
    });
    return packageMap;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zeXN0ZW0taDIvZ2VuZXJhdGUtY29uZmlnL2dlbmVyYXRlLXBhY2thZ2UtbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQTtBQUd2QixPQUFPLEVBQUUsR0FBRyxFQUFFLGFBQWEsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUVoRCxNQUFNLDZCQUE2QixVQUFrQixFQUFFLFdBQW1CO0lBQ3hFLE1BQU0sVUFBVSxHQUFjLEVBQUUsQ0FBQTtJQUNoQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsVUFBVSxHQUFHLEdBQUcsR0FBRyxXQUFXLEdBQUcsR0FBRyxLQUFLLEdBQUcsT0FBTyxhQUFhLEdBQUcsQ0FBQyxDQUFBO0lBQy9GLE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksVUFBVSxHQUFHLEdBQUcsR0FBRyxXQUFXLEdBQUcsR0FBRyxjQUFjLENBQUMsQ0FBQTtJQUVoRixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7UUFDckIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUFDLE1BQU0sQ0FBQTtRQUNyQyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQzlCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDVixNQUFNLE1BQU0sR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1lBQzlCLFVBQVUsQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsVUFBVSxHQUFHLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQzlELENBQUM7SUFDSCxDQUFDLENBQUMsQ0FBQTtJQUVGLE1BQU0sQ0FBQyxVQUFVLENBQUE7QUFDbkIsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZS1jb25maWcvZ2VuZXJhdGUtcGFja2FnZS1tYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2xvYiBmcm9tICdnbG9iJ1xuaW1wb3J0IHsgQ29uZmlnTWFwIH0gZnJvbSAnc3lzdGVtanMnXG5cbmltcG9ydCB7IFNFUCwgSlNfRVhURU5TSU9OUyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVQYWNrYWdlTWFwKHJvb3RGb2xkZXI6IHN0cmluZywgcGFja2FnZVBhdGg6IHN0cmluZyk6IENvbmZpZ01hcCB7XG4gIGNvbnN0IHBhY2thZ2VNYXAgPSA8Q29uZmlnTWFwPnt9XG4gIGNvbnN0IGZpbGVzID0gZ2xvYi5zeW5jKGAke3Jvb3RGb2xkZXJ9JHtTRVB9JHtwYWNrYWdlUGF0aH0ke1NFUH0qKiR7U0VQfSouQCgke0pTX0VYVEVOU0lPTlN9KWApXG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7cm9vdEZvbGRlcn0ke1NFUH0ke3BhY2thZ2VQYXRofSR7U0VQfSguKilcXFxcLlxcXFx3KyRgKVxuXG4gIGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICBpZiAoZmlsZS5tYXRjaCgvaW5kZXhcXC5cXHcrJC8pKSByZXR1cm5cbiAgICBjb25zdCBtYXRjaCA9IHJlZ2V4LmV4ZWMoZmlsZSlcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IG1hcEtleSA9IGAuLyR7bWF0Y2hbMV19YFxuICAgICAgcGFja2FnZU1hcFttYXBLZXldID0gZmlsZS5yZXBsYWNlKGAke3Jvb3RGb2xkZXJ9JHtTRVB9YCwgJycpXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBwYWNrYWdlTWFwXG59XG4iXX0=
